{"ast":null,"code":"import _regeneratorRuntime from\"/home/skyraider/Projects/React/trenders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/skyraider/Projects/React/trenders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/skyraider/Projects/React/trenders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/skyraider/Projects/React/trenders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/skyraider/Projects/React/trenders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/skyraider/Projects/React/trenders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/skyraider/Projects/React/trenders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{Route}from\"react-router-dom\";import{connect}from\"react-redux\";import{firestore,convertColletionToMap}from\"../../firebase/firebase.utils\";import{updateCollections}from\"../../redux/shop/shop.actions\";import WithSpinner from\"../../components/with-spinner/with-spinner\";import CollectionPage from\"../collection/collection.page\";import CollectionsOverview from\"../../components/collection-overview/collection-overview\";// import collectionOverview from \"../../components/collection-overview/collection-overview\";\n// import collectionPage from \"../collection/collection.page\";\nvar CollectionsOverviewWithSpinner=WithSpinner(CollectionsOverview);var CollectionPageWithSpinner=WithSpinner(CollectionPage);var ShopPage=/*#__PURE__*/function(_React$Component){_inherits(ShopPage,_React$Component);function ShopPage(){var _getPrototypeOf2;var _this;_classCallCheck(this,ShopPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ShopPage)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={isLoading:true};_this.unsubscribeFromSnap=null;return _this;}_createClass(ShopPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var updateCollections=this.props.updateCollections;// console.log(updateCollections, \"updateCollections\");\nvar collectionRef=firestore.collection(\"collections\");collectionRef.onSnapshot(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(snaphot){var collectionMap;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collectionMap=convertColletionToMap(snaphot);// console.log(\"shop mount\", collectionMap);\nupdateCollections(collectionMap);_this2.setState({isLoading:false});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"render\",value:function render(){var match=this.props.match;var isLoading=this.state.isLoading;return React.createElement(\"div\",{className:\"shop\"},React.createElement(Route,{exact:true,path:\"\".concat(match.path),render:function render(props){return React.createElement(CollectionsOverviewWithSpinner,Object.assign({isLoading:isLoading},props));}// component={CollectionsOverview}\n}),React.createElement(Route,{path:\"\".concat(match.path,\"/:collectionId\"),render:function render(props){return React.createElement(CollectionPageWithSpinner,Object.assign({isLoading:isLoading},props));}// component={CollectionPage}\n}));}}]);return ShopPage;}(React.Component);var mapDispatchStateToProps=function mapDispatchStateToProps(dispatch){return{updateCollections:function updateCollections(collectionMap){return dispatch({type:\"UPDATE_COLLECTIONS\",payload:collectionMap});}};};export default connect(null,mapDispatchStateToProps)(ShopPage);","map":{"version":3,"sources":["/home/skyraider/Projects/React/trenders/src/pages/shoppage/shop.jsx"],"names":["React","Route","connect","firestore","convertColletionToMap","updateCollections","WithSpinner","CollectionPage","CollectionsOverview","CollectionsOverviewWithSpinner","CollectionPageWithSpinner","ShopPage","state","isLoading","unsubscribeFromSnap","props","collectionRef","collection","onSnapshot","snaphot","collectionMap","setState","match","path","Component","mapDispatchStateToProps","dispatch","type","payload"],"mappings":"6lCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,KAAT,KAAsB,kBAAtB,CAEA,OAASC,OAAT,KAAwB,aAAxB,CAEA,OACEC,SADF,CAEEC,qBAFF,KAGO,+BAHP,CAKA,OAASC,iBAAT,KAAkC,+BAAlC,CAEA,MAAOC,CAAAA,WAAP,KAAwB,4CAAxB,CAEA,MAAOC,CAAAA,cAAP,KAA2B,+BAA3B,CACA,MAAOC,CAAAA,mBAAP,KAAgC,0DAAhC,CACA;AACA;AAEA,GAAMC,CAAAA,8BAA8B,CAAGH,WAAW,CAACE,mBAAD,CAAlD,CACA,GAAME,CAAAA,yBAAyB,CAAGJ,WAAW,CAACC,cAAD,CAA7C,C,GAEMI,CAAAA,Q,mZACJC,K,CAAQ,CACNC,SAAS,CAAE,IADL,C,OAGRC,mB,CAAsB,I,iGAEF,oBACVT,CAAAA,iBADU,CACY,KAAKU,KADjB,CACVV,iBADU,CAElB;AACA,GAAMW,CAAAA,aAAa,CAAGb,SAAS,CAACc,UAAV,CAAqB,aAArB,CAAtB,CACAD,aAAa,CAACE,UAAd,0FAAyB,iBAAMC,OAAN,oIACjBC,aADiB,CACDhB,qBAAqB,CAACe,OAAD,CADpB,CAEvB;AACAd,iBAAiB,CAACe,aAAD,CAAjB,CACA,MAAI,CAACC,QAAL,CAAc,CAAER,SAAS,CAAE,KAAb,CAAd,EAJuB,sDAAzB,gEAMD,C,uCACQ,IACCS,CAAAA,KADD,CACW,KAAKP,KADhB,CACCO,KADD,IAECT,CAAAA,SAFD,CAEe,KAAKD,KAFpB,CAECC,SAFD,CAGP,MACE,4BAAK,SAAS,CAAC,MAAf,EACE,oBAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,WAAKS,KAAK,CAACC,IAAX,CAFN,CAGE,MAAM,CAAE,gBAAAR,KAAK,QACX,qBAAC,8BAAD,gBAAgC,SAAS,CAAEF,SAA3C,EAA0DE,KAA1D,EADW,EAGb;AANF,EADF,CASE,oBAAC,KAAD,EACE,IAAI,WAAKO,KAAK,CAACC,IAAX,kBADN,CAEE,MAAM,CAAE,gBAAAR,KAAK,QACX,qBAAC,yBAAD,gBAA2B,SAAS,CAAEF,SAAtC,EAAqDE,KAArD,EADW,EAGb;AALF,EATF,CADF,CAmBD,C,sBAvCoBf,KAAK,CAACwB,S,EA0C7B,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAAAC,QAAQ,QAAK,CAC3CrB,iBAAiB,CAAE,2BAAAe,aAAa,QAC9BM,CAAAA,QAAQ,CAAC,CAAEC,IAAI,CAAE,oBAAR,CAA8BC,OAAO,CAAER,aAAvC,CAAD,CADsB,EADW,CAAL,EAAxC,CAKA,cAAelB,CAAAA,OAAO,CACpB,IADoB,CAEpBuB,uBAFoB,CAAP,CAGbd,QAHa,CAAf","sourcesContent":["import React from \"react\";\n\nimport { Route } from \"react-router-dom\";\n\nimport { connect } from \"react-redux\";\n\nimport {\n  firestore,\n  convertColletionToMap\n} from \"../../firebase/firebase.utils\";\n\nimport { updateCollections } from \"../../redux/shop/shop.actions\";\n\nimport WithSpinner from \"../../components/with-spinner/with-spinner\";\n\nimport CollectionPage from \"../collection/collection.page\";\nimport CollectionsOverview from \"../../components/collection-overview/collection-overview\";\n// import collectionOverview from \"../../components/collection-overview/collection-overview\";\n// import collectionPage from \"../collection/collection.page\";\n\nconst CollectionsOverviewWithSpinner = WithSpinner(CollectionsOverview);\nconst CollectionPageWithSpinner = WithSpinner(CollectionPage);\n\nclass ShopPage extends React.Component {\n  state = {\n    isLoading: true\n  };\n  unsubscribeFromSnap = null;\n\n  componentDidMount() {\n    const { updateCollections } = this.props;\n    // console.log(updateCollections, \"updateCollections\");\n    const collectionRef = firestore.collection(\"collections\");\n    collectionRef.onSnapshot(async snaphot => {\n      const collectionMap = convertColletionToMap(snaphot);\n      // console.log(\"shop mount\", collectionMap);\n      updateCollections(collectionMap);\n      this.setState({ isLoading: false });\n    });\n  }\n  render() {\n    const { match } = this.props;\n    const { isLoading } = this.state;\n    return (\n      <div className=\"shop\">\n        <Route\n          exact\n          path={`${match.path}`}\n          render={props => (\n            <CollectionsOverviewWithSpinner isLoading={isLoading} {...props} />\n          )}\n          // component={CollectionsOverview}\n        />\n        <Route\n          path={`${match.path}/:collectionId`}\n          render={props => (\n            <CollectionPageWithSpinner isLoading={isLoading} {...props} />\n          )}\n          // component={CollectionPage}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapDispatchStateToProps = dispatch => ({\n  updateCollections: collectionMap =>\n    dispatch({ type: \"UPDATE_COLLECTIONS\", payload: collectionMap })\n});\n\nexport default connect(\n  null,\n  mapDispatchStateToProps\n)(ShopPage);\n"]},"metadata":{},"sourceType":"module"}